apiVersion: v1
kind: Secret
metadata:
  name: postgres-db-init
type: Opaque
stringData:
  01-app.sql: |
    CREATE ROLE words WITH LOGIN PASSWORD 'password';
    CREATE DATABASE app;
    GRANT CONNECT, CREATE ON DATABASE app TO words;

    \c app

    CREATE TABLE nouns (
    id SERIAL PRIMARY KEY,
    noun TEXT NOT NULL
    );
    
    INSERT INTO nouns (noun) VALUES ('cat'), ('dog'), ('bird'), ('fish');
    
    CREATE TABLE verbs (
    id SERIAL PRIMARY KEY,
    verb TEXT NOT NULL
    );
    
    INSERT INTO verbs (verb) VALUES ('eat'), ('f**k'), ('marry'), ('kill');